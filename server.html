<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>SirTros Status</title>
    <link href="fonts.googleapis.com" rel="stylesheet">
    <style>
        body { background: #111; color: white; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { background: #222; padding: 30px; border-radius: 15px; text-align: center; border: 2px solid #333; width: 300px; }
        h1 { font-family: 'Chakra Petch', sans-serif; color: #00fbff; margin: 0; }
        .status { margin: 15px 0; font-weight: bold; padding: 5px; border-radius: 5px; }
        .online { background: #003311; color: #00ff88; }
        .offline { background: #330000; color: #ff4d4d; }
        .players { font-size: 3rem; font-family: 'Chakra Petch', sans-serif; margin: 10px 0; }
    </style>
</head>
<body>

<div class="box">
    <h1>sɪʀᴛʀᴏs sᴇʀᴠᴇʀ</h1>
    <div id="statusDiv" class="status offline">ZJIŠŤUJI...</div>
    <div class="players" id="playerCount">? / ?</div>
    <div style="color: #888; font-size: 0.8rem;">SirTros.aternos.me</div>
</div>

<script>
    async function checkServer() {
        const ip = 'SirTros.aternos.me';
        const statusDiv = document.getElementById('statusDiv');
        const playerCount = document.getElementById('playerCount');

        try {
            // Přímé volání API bez proxy
            const res = await fetch(`api.mcsrvstat.us{ip}`);
            const data = await res.json();

            if (data.online) {
                statusDiv.innerText = "ONLINE";
                statusDiv.className = "status online";
                playerCount.innerText = data.players.online + " / " + data.players.max;
            } else {
                statusDiv.innerText = "OFFLINE (ZAPNI SERVER)";
                statusDiv.className = "status offline";
                playerCount.innerText = "0 / 0";
            }
        } catch (e) {
            statusDiv.innerText = "CHYBA (ZKUS REFRESH)";
            console.error(e);
        }
    }

    checkServer();
    setInterval(checkServer, 30000); // Kontrola každých 30 sekund
</script>

</body>
</html>
